---
title       : "Thinking the `SpaDES` way"
author      : "Alex M Chubaty & Eliot McIntire"
date        : "September 14, 2016"
output:
  ioslides_presentation:
    logo: images/predictive_ecology_logo.png
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_chunk$set(cache = TRUE)
```

## SpaDES

**Spa**tial **D**iscrete **E**vent **S**imulator

- [Discrete event simulators](https://en.wikipedia.org/wiki/Discrete_event_simulation) have a long history in computer science
- In Ecology, there are many:

    - LANDIS
    - SELES
- Different than continuous time

## Events

- Spring thaw  
<br>
![](http://www.premier-roofing.com/wp-content/uploads/2014/03/stock-footage-spring-thaw-time-lapse.jpg)
- Brainstorm events...


## Modules

- Modules are a "convenient" way to group events that fit naturally together
- e.g., 

    - fire ignition module
    - carbon accumulation module
    - data preparation module
    
- What is contained in one module is highly idiosyncratic 

## Module types

- There are many types of modules that may be useful

    - Agents
    - Events
    - Data preparation
    - Summaries of data
    - Parent and child modules
    - see list from [SpaDES wiki](https://github.com/PredictiveEcology/SpaDES/wiki/Getting-Started-Guide#types-of-modules)
    
- Once we see that a module is just a convenient way to group together events, anything can be a module
- Can be 1 lines of code or as large as you want

## Agent module

- [wolfAlps](https://github.com/PredictiveEcology/SpaDES-modules/blob/master/modules/wolfAlps/wolfAlps.R)
- Mountain Pine Beetle

## Raster module

- Vegetation change
- Spatial clustering (e.g., to create polygons)
- Aging
- Class change (e.g., land cover class)
- Biomass change
- etc.



## Data preparation module

- 

## Parent and child modules

- 

## Why use a SpaDES module

... instead of just an R script or function

- allows things to be scheduled
- allows modularity

    - a module can be reused by someone else with little change
- Can be published on the web
- Can estimate unknown parameters
- and much more...

## Module anatomy

A module is an **R script** with 3 parts:

1. **Metadata** - a list of 15 things

    - Name, Author, Description, other for human reader
    - parameters, input objects, output objects for R to "understand"
    
2. **doEvent** - 2 types of things here

    - schedule events
    - run functions
    
3. **Anything else**

    - custom functions
    - initial data preparation steps
    

## Running `SpaDES`

Essentially 2 steps

1. Create a `simList` using `simInit` function
2. Run `spades`

All the necessary information is contained within the `simList`

What might be needed for a DES to run... 

## What is in the `simList`

    - start and stop times
    - data
    - paths
    - which modules to use
    - parameters
    - a schedule of events
    - outputs

- Will be covered in detail [next](http://Rpubs.com/PredictiveEcology/SpaDES-Intro-03-getting-technical)

## Data

- We are working with R, so we can use any data structure or file format that R can understand
- SpaDES has some helpers for loading data, but in general, the module should be explicit

    - e.g., downloadData("caribouMovement", path = tempdir())
    
- A module takes input data, changes them, and provides outputs
- like a function, but with the addition of "time"

- Some challenges ...

## Data challenges

Numerous challenges exist with data

- messy
- ownership
- large
- permissions
- errors
- other

SpaDES doesn't necessarily solve these issues, but in some cases it helps

## Where to get help

- docs
- vignettes
- wiki
- user group
- bug reports
